====
bind
====

Formulas to set up and configure the bind DNS server.

.. note::

    See the full `Salt Formulas installation and usage instructions
    <http://docs.saltstack.com/en/latest/topics/development/conventions/formulas.html>`_.

Available states
================

.. contents::
    :local:

``bind``
--------

Install the bind package and start the bind service.

``bind.config``
---------------

Manage the bind configuration file.
This state can generate some basic zone files if a `records` entry is found in the
`available_zones`' declaration for the zone (see `pillar.example` for how to write these)

Example Pillar
==============

.. code:: yaml

    bind:
      configured_zones:
        example.com:
          type: master
          notify: False
      available_zones:
        example.com:
          file: example.com.txt
          soa:
            ns: ns1.example.com                       # Required
            contact: hostmaster.example.com           # Required
            serial: 2017041001                        # Required
          records:                                    # Records for the zone, grouped by type
            A:
              mx1:                                    # A RR with multiple values can
                - 1.2.3.228                           # be written as an array
                - 1.2.3.229
              cat: 2.3.4.188
              rat: 1.2.3.231
              live: 1.2.3.236

See *bind/pillar.example* for a more complete example.

On the other hand, if no `records` entry exists, the zone file is not generated by this state
rather than taken from `salt://zones`. See `pillar.example` for how to overwrite
this URL.

Example Pillar
==============

.. code:: yaml

    bind:
      configured_zones:
        sub.domain.com:
          type: master
          notify: False
      configured_views:
        myview1:
          match_clients:
            - client1
            - client2
        configured_zones:
          my.zone:
            type: master
            notify: False

See *bind/pillar.example*.

Notes
=====

* When using views all zones must be configured in views!
